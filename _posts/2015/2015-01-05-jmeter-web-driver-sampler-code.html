---
layout: post
title: 'JMeter Client side performance testing : How to write web driver sampler code?'
date: '2015-01-05T19:01:00.000+06:00'
author: Shantonu Sarker
tags:
- jmeter
modified_time: '2015-01-05T19:03:29.387+06:00'
thumbnail: http://lh4.ggpht.com/-K9I01IJP6Xo/VKqJnnNPEwI/AAAAAAAABIM/I8WWO4AFabU/s72-c/image_thumb%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-2902524569242410076.post-2566845325900816598
blogger_orig_url: https://shantonusarker.blogspot.com/2015/01/jmeter-web-driver-sampler-code.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">In this article we are going to see how to write code in JMeter webdriver sampler(from jmeter plugins). It is part of Jmeter Client side performance testing.<br /><br /><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">As we know from previous post that webdriver plugins use selenium. So, make sure that you have selenium server(selenium-server-standalone-2.44.0) and firefox 26 in environment.&nbsp; </div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">Now, Typically I would say, lets follow 2 min tutorial before start. You can get that from <b><a href="http://jmeter-plugins.org/wiki/WebDriverTutorial/" target="_blank">jmeter plugins sites</a></b>. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />So, please follow that and have a run. </div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">I am using view result tree to have detail explanation. And, after following the link, It will be looking like this.</div><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://lh6.ggpht.com/-0dyyuoajvHo/VKqJnAlXbuI/AAAAAAAABIE/qCd0_N5FRPI/s1600-h/image%25255B4%25255D.png"><img alt="image" border="0" src="http://lh4.ggpht.com/-K9I01IJP6Xo/VKqJnnNPEwI/AAAAAAAABIM/I8WWO4AFabU/image_thumb%25255B2%25255D.png?imgmax=800" height="150" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="451" /></a> </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />Let see firefox config , select default unless you have any specific settings.<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://lh3.ggpht.com/-U4XV3-q3tP4/VKqJoBzYTpI/AAAAAAAABIU/uEyzcBHEpqk/s1600-h/image%25255B9%25255D.png"><img alt="image" border="0" src="http://lh3.ggpht.com/-if_z2u3tHPQ/VKqJoz5lUYI/AAAAAAAABIc/6W_RCxQvd5E/image_thumb%25255B5%25255D.png?imgmax=800" height="310" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="378" /></a> </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />In firefox tab, you can see changing user agent . This is for simulation of different version of firefox. </div><div dir="ltr" style="text-align: left;" trbidi="on">And, the experimental feature<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://lh3.ggpht.com/-LQ-2PNKoj9A/VKqJpXr3GQI/AAAAAAAABIg/EfXZaD_abv8/s1600-h/image%25255B15%25255D.png"><img alt="image" border="0" src="http://lh3.ggpht.com/-GM6ljDhqqG8/VKqJp4VRgfI/AAAAAAAABIs/9wr5rrC8BYs/image_thumb%25255B9%25255D.png?imgmax=800" height="151" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="483" /></a> </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />First one is, it will create new browser. It is necessary when you need to initiate session /cookie/browser data for each iteration. Useful when you are running multiple firefox in a single test execution. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />Second one is for only debugging. Spatially when selenium don’t get the element, it is difficult for us to find the exact spot. It will stop execution and you can see where firefox holed.&nbsp;<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">Now, let's see webdriver sampler. Its pretty basic<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://lh3.ggpht.com/-oap_hvFOv7A/VKqJqo_eqbI/AAAAAAAABIw/E50rexuuv3s/s1600-h/image%25255B21%25255D.png"><img alt="image" border="0" src="http://lh6.ggpht.com/-Zh5u0U3aGg4/VKqJredugQI/AAAAAAAABI8/EmSA-VgWfaw/image_thumb%25255B13%25255D.png?imgmax=800" height="270" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="569" /></a> </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />BTW, as I told in my <b><a href="http://shantonusarker.blogspot.com/2014/12/jmeter-client-side-performance-test.html" target="_blank">previous post</a></b> , this start and stop part will calculate time. for the requests in between them. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />Now, lets see view result tree, from jmeter plug in site, they use view result table. But , we are going to see view result tree to have more detail idea on what just happened.<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://lh5.ggpht.com/-PWALufBviRQ/VKqJr1zPxuI/AAAAAAAABJA/rgr7-yZL5AU/s1600-h/image%25255B26%25255D.png"><img alt="image" border="0" src="http://lh5.ggpht.com/-GU1ZTPvjKBc/VKqJsWAdzuI/AAAAAAAABJM/ziGIYunNdgo/image_thumb%25255B16%25255D.png?imgmax=800" height="385" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="421" /></a> </div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on"><br />From sample result, we see load time, this is in millisecond. Which is exactly the time for going to Google from browser. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br />The size shows page size. And, see the response code. Though this is client side performance, but it is validating the page based on http 200 response not based on full page rendering. This is because, webdriver sampler is extension of http sampler which validates with response http 200 message. </div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">&nbsp;So, your site UI elements loading time will be calculated but, it will not show any error in case of more time taken or no resource found. That means, for validation , you have to work manually. What I follow is, i used to check any text value after page loading which gives me exact time measured in my steps. And If I cant see the text(jmeter could not see), jmeter shows error and i get to know the previous request all data are not available yet in browser. This helps me in finding the exact delays and steps to follow.<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">So, now lets test a famous social media site <a href="https://www.sumazi.com/" title="https://www.sumazi.com/">https://www.sumazi.com/</a></div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-size: medium;">Step 1</span> : Create a thread group (Test Plan –&gt;Threads) and name that as Sumazi-Client Execution</div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-size: medium;">Step 2 :</span> Add, jp@gc - Firefox Driver Config under your thread. (right click thread –&gt;add-&gt;config element -&gt;jp@gc - Firefox Driver Config)</div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-size: medium;">Step 3:</span> Add jp@gc - Web Driver Sampler under your thread. (right click thread –&gt;add-&gt;sampler -&gt;jp@gc - Web Driver Sampler)</div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-size: medium;">Step 4 :</span> Add view result tree. </div><div dir="ltr" style="text-align: left;" trbidi="on">Note : I prefer to add a <b>jp@gc - Parameterized Controller</b> to keep my variables separate from test steps. You will see that from image in this post. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-size: medium;">Step 5.</span> Select use system proxy in Firefox driver config. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><span style="font-size: medium;">Step 6.</span> Now, past the following code in webdriver sampler.<br /></div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div id="codeSnippetWrapper"><div id="codeSnippet" style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum1" style="color: #606060;">   1:</span> var selenium = JavaImporter(org.openqa.selenium)</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum2" style="color: #606060;">   2:</span> var time = JavaImporter(java.util.concurrent.TimeUnit)</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum3" style="color: #606060;">   3:</span> WDS.browser.manage().timeouts().implicitlyWait(30, time.TimeUnit.SECONDS)</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum4" style="color: #606060;">   4:</span> WDS.sampleResult.sampleStart()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum5" style="color: #606060;">   5:</span> WDS.browser.get(<span style="color: #006080;">'https://www.sumazi.com/'</span>)</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum6" style="color: #606060;">   6:</span> WDS.browser.findElement(selenium.By.linkText(<span style="color: #006080;">"About"</span>)).click()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum7" style="color: #606060;">   7:</span> WDS.browser.findElement(selenium.By.linkText(<span style="color: #006080;">"Uses"</span>)).click()</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum8" style="color: #606060;">   8:</span> WDS.browser.findElement(selenium.By.linkText(<span style="color: #006080;">"Team"</span>)).click()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum9" style="color: #606060;">   9:</span> WDS.browser.findElement(selenium.By.linkText(<span style="color: #006080;">"Login"</span>)).click()</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum10" style="color: #606060;">  10:</span> WDS.browser.findElement(selenium.By.name(<span style="color: #006080;">"username"</span>)).clear()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum11" style="color: #606060;">  11:</span> WDS.browser.findElement(selenium.By.name(<span style="color: #006080;">"username"</span>)).sendKeys(<span style="color: #006080;">"shantonu_oxford@yahoo.com"</span>)</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum12" style="color: #606060;">  12:</span> WDS.browser.findElement(selenium.By.name(<span style="color: #006080;">"password"</span>)).clear()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum13" style="color: #606060;">  13:</span> WDS.browser.findElement(selenium.By.name(<span style="color: #006080;">"password"</span>)).sendKeys(<span style="color: #006080;">"1234567890"</span>)</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum14" style="color: #606060;">  14:</span> WDS.browser.findElement(selenium.By.linkText(<span style="color: #006080;">"Submit"</span>)).click()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum15" style="color: #606060;">  15:</span> WDS.browser.navigate().back()</pre><!--CRLF--><br /><pre style="background-color: #f4f4f4; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum16" style="color: #606060;">  16:</span> WDS.browser.findElement(selenium.By.linkText(<span style="color: #006080;">"Blog"</span>)).click()</pre><!--CRLF--><br /><pre style="background-color: white; border-bottom-style: none; border-left-style: none; border-right-style: none; border-top-style: none; color: black; direction: ltr; font-family: 'Courier New', courier, monospace; font-size: 8pt; line-height: 12pt; margin: 0em; overflow: visible; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; text-align: left; width: 100%;"><span id="lnum17" style="color: #606060;">  17:</span> WDS.sampleResult.sampleEnd()</pre><!--CRLF--></div></div><br />It will be like this <br /><br /><a href="http://lh3.ggpht.com/-B8RFkr6mx3s/VKqJs1D1R_I/AAAAAAAABJQ/Vr2vprYqf8Y/s1600-h/image%25255B38%25255D.png"><img alt="image" border="0" src="http://lh5.ggpht.com/-RpfUo0dhKqM/VKqJtdbND1I/AAAAAAAABJc/s5kq7DDU-T8/image_thumb%25255B26%25255D.png?imgmax=800" height="344" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="image" width="704" /></a><br /><br /><div dir="ltr" style="text-align: left;" trbidi="on">Now , Run the script. You should see browser opens and you can get the the all methods are working. </div><div dir="ltr" style="text-align: left;" trbidi="on"></div><div dir="ltr" style="text-align: left;" trbidi="on">Now, lets open view result tree listener and see what is in there. </div><br /><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://lh3.ggpht.com/-FHSzF0tax28/VKqJt0WJLpI/AAAAAAAABJg/A0NfhWS32s4/s1600-h/image%25255B44%25255D.png"><img alt="image" border="0" src="http://lh5.ggpht.com/-pOThDx8coRs/VKqJuZRhsWI/AAAAAAAABJo/4rbhdiYwXWU/image_thumb%25255B30%25255D.png?imgmax=800" height="424" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="image" width="436" /></a> </div><br /><div dir="ltr" style="text-align: left;" trbidi="on"></div><br /><div dir="ltr" style="text-align: left;" trbidi="on">So, the time is <b>10.851</b> second for all steps and size <b>23905</b> byte for full requests. </div><br /><a href="https://drive.google.com/file/d/0B-OmBwkwiTCQWkxFeUwwcm5PM0E/view?usp=sharing" target="_blank"><b>JMX file from Drive Share</b></a><br /><br /><div dir="ltr" style="text-align: left;" trbidi="on">This script only made for going to all URL and measures the full browsing time. This is combined of steps, like specific transaction. In next blog, we will see how to debug and break steps to get actual user time for particular request.</div><br /><div dir="ltr" style="text-align: left;" trbidi="on"></div><br /><div dir="ltr" style="text-align: left;" trbidi="on">Thanks…:)</div><br /><div dir="ltr" style="text-align: left;" trbidi="on"></div></div><div class="blogger-post-footer">Thanks for reading my personal blog. contact: shantonu_oxford@yahoo.com</div>