---
layout: post
title: Android APK(No Source Code) Test in Robotium
date: '2013-06-19T11:35:00.001+06:00'
author: Shantonu Sarker
tags:
- Robotium
- Android
modified_time: '2013-06-30T04:25:57.779+06:00'
blogger_id: tag:blogger.com,1999:blog-2902524569242410076.post-5206887747920739914
blogger_orig_url: https://shantonusarker.blogspot.com/2013/06/android-apkno-source-code-test-in.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">In this article we are going to see how can we write unit tests with Robotium Framework when we do not have the source code. That means we are going to test an application using its installer apk file.<br /><br />Please read my previous <a href="http://shantonusarker.blogspot.com/2013/06/setting-up-robotium-in-eclipse_16.html" target="_blank">post </a>for robotium setup basic <br /><br /><br />In this post we will only see the test Class used for testing stand alone APK (not with code). So, please see my this <a href="http://shantonusarker.blogspot.com/2013/06/how-to-write-test-case-in-robotium-with.html" target="_blank">post </a>for code start basic. I will mainly focus on test class here. <br /><br />To test a stand alone application, we need to have debug version of APK file. To convert an apk to debug version, see my this <a href="http://shantonusarker.blogspot.com/2013/04/how-to-re-sign-android-appapk.html" target="_blank">post</a>.<br /><br />Like as following this <a href="http://shantonusarker.blogspot.com/2013/06/how-to-write-test-case-in-robotium-with.html" target="_blank">post</a>, we will not add dependency project. In stead of this step, we have to install the application in the emulator.<br />And add android test project in eclipse with robotium library. Now add a class(<i>APKTestCase). </i><br /><br />So, after adding a test class( my example class name is <i>APKTestCase </i>), we will extend from <i>ActivityInstrumentationTestCase2</i> without parameter(as we don't have codes, so we do not know) <br />So, my test class will be. <br /><br /><i>public class APKTestCase extends ActivityInstrumentationTestCase2{</i><br /><i>}</i>And the constructor&nbsp;<br /><i>public APKTestCase() throws ClassNotFoundException{</i><br /><i>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; super();<br />}</i><br /><br /><br />This constructor needs class name as parameter. So, how to get the class name ? We have to be very careful here. While testing with robotium, only activity name is not enough , we have to specify the class name. The <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQU3lFNEVpU0x3SkU/edit?usp=sharing" target="_blank">screen shot</a> is showing how to define the class name with pacakage name. This is called full class name. <br />So, if we do not have source code, so how can we get the class name. This is a bit tricky. <br />-Run eclipse and open an emulator. <br />-Run your installed application(if not installed, then install it first using ADB commands, use my this <a href="http://shantonusarker.blogspot.com/2012/10/adb-commandsbasic-managing-android.html" target="_blank">post</a>)<br />-From eclipse, see log cat messages in no filtered mode.(usually in verbose)<br />After starting activity, system process shows in text section. <br />you can see the message like this &lt;activity neme&gt;/.&lt;Class Name&gt; : +&lt;time&gt; . See the screen shot <br />Here is the <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQNkdPdTZneWZWa3M/edit?usp=sharing" target="_blank">screen shot </a><br /><br />So our full class name will be. com.example.android.notepad.NotesList<br />Now, we have to convert this class name into class by an identifier. To do this we will use a spatial class named as Class to identify. We will use it as static as it is accessing static class name. So for this part , our code will be <br /><i>private static final String Launcher_Activity_ClassName&nbsp; = "com.example.android.notepad.NotesList";&nbsp;&nbsp;&nbsp;</i><br /><i>private static Class launcherActivityClass;</i><br /><i>static{<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try{<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; launcherActivityClass = Class.forName(Launcher_Activity_ClassName);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }catch (ClassNotFoundException ex) {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; throw new RuntimeException(ex);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</i><br /><i>}</i><br />And the constructor will become<br /><i>public APKTestCase() throws ClassNotFoundException<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;super(launcherActivityClass);</i><br /><i>}</i><br /><br />Like as standard test case, we need to override setup &amp; tear down. So, finally class will be <br /><br /><i>@SuppressWarnings("unchecked")<br />public class APKTestCase extends ActivityInstrumentationTestCase2{&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;private Solo mySolo; <br />&nbsp;&nbsp; &nbsp;private static final String Launcher_Activity_ClassName&nbsp; = "com.example.android.notepad.NotesList";&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;private static Class launcherActivityClass;<br />&nbsp;&nbsp; &nbsp;static{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;launcherActivityClass = Class.forName(Launcher_Activity_ClassName);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}catch (ClassNotFoundException ex) {<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throw new RuntimeException(ex);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;}</i><br /><i>&nbsp;&nbsp;&nbsp; public APKTestCase() throws ClassNotFoundException<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;super(launcherActivityClass);<br />&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;@Override<br />&nbsp;&nbsp; &nbsp;public void setUp() throws Exception<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;mySolo = new Solo(getInstrumentation(), getActivity());<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;@Override<br />&nbsp;&nbsp; &nbsp;public void tearDown() throws Exception<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;mySolo.finishOpenedActivities();</i><br /><i>}</i><br /><br />Now we are ready for writing test case. We can add any sample test case. You may see a sample project link in <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQMUNneFRmV1Q3SDA/edit?usp=sharing" target="_blank">here</a>.<br /><br />Thanks...:)</div><div class="blogger-post-footer">Thanks for reading my personal blog. contact: shantonu_oxford@yahoo.com</div>