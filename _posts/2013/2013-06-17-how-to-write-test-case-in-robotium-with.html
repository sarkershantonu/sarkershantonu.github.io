---
layout: post
title: How to write test case in Robotium with source code
date: '2013-06-17T15:40:00.000+06:00'
author: Shantonu Sarker
tags:
- Robotium
- Android
modified_time: '2013-06-30T04:25:57.740+06:00'
blogger_id: tag:blogger.com,1999:blog-2902524569242410076.post-1310341909157458894
blogger_orig_url: https://shantonusarker.blogspot.com/2013/06/how-to-write-test-case-in-robotium-with.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">In this article we are going to see how can we write unit test case for a android application. We will discuses about a small demo example with detail explanation. The objective of the post is to have clear idea on how to get started with robotium uni test case writing for a invoice. <br /><br />First we need a project which we will test.We can download a notepad project which is used for learning purpose with robotium from <a href="http://code.google.com/p/robotium/downloads/detail?name=ExampleTestProject_v4.1.zip&amp;can=2&amp;q=" target="_blank">here</a>. We will get two projects there, one project containing application code base another one is robotium test case. Here is the <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQT2lhWDU2Z3BEX3M/edit?usp=sharing" target="_blank">link </a>of the same project from my drive. We will use the code base.We will add the code base to eclipse. To do that, just import the downloaded code base. In eclipse, From, <b>File &gt;Import &gt;</b> Select <b>Archive file</b> under <b>General </b>&gt; show the <b>downloaded ZIP</b> file and finish the process.<br /><br />To setup robotium environment, see my this <a href="http://shantonusarker.blogspot.com/2013/06/setting-up-robotium-in-eclipse_16.html" target="_blank">post</a>. So, we will start from adding a android test project.[ As all previous steps are shown in my post]<br /><br />After adding a<b> test project</b>, we get a package. We can <b>edit the package</b> names from android manifest in case we want to change the package name(for test project). Here is the <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQSUk3YWRXSUZYUnM/edit?usp=sharing" target="_blank">screen shot. </a><br /><br />Now, we have to add <b>target package</b> in current application manifest. To do that,<br />-Click AndroidManifest.xml<br />-Click Instruments tab<br />-Click the android.test.InstrumentationTestRunner<br />-From Target Package, provide the target package name.<br />(from this example : <i>com.example.android.notepad</i>)<br />-<a href="https://docs.google.com/file/d/0B-OmBwkwiTCQemxNSnphOEtBZ00/edit?usp=sharing" target="_blank">Screenshot</a> <br />Now save this. We can do the same thing by adding this<br /><i>&nbsp;&lt;instrumentation android:targetPackage="com.example.android.notepad" /&gt;</i><br />directly to AndroidManifest.xml<br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQSWs5S2NfVjZmcVk/edit?usp=sharing" target="_blank">Screenshot </a><br /><br />So,after renaming I have made my project as <b>com.notepad.test</b> this package and target package is <b>com.example.android.notepad</b>. <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQSUk3YWRXSUZYUnM/edit?usp=sharing" target="_blank">Screen shot </a><br /><br />Now, we need to include the main project(which we will test) as <b>dependent </b>of our test project. So that, when we will run the test case, the application apk will be installed in the test environment.&nbsp; To do that.<br />-Right click on test project and select properties<br />-Click Java build path<br />-Select project tab and click add<br />-Select NotePad project and press ok <br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQaHN3cXZtbEd4eU0/edit?usp=sharing" target="_blank">Screenshot</a><br /><br />So Now, <b>Add a class</b> under a package of src folder .<br />After a class creation , extend the class from base class of " ActivityInstrumentationTestCase2 ".<br />So what is this "ActivityInstrumentationTestCase2" ?<br />This is a unit test case template(base class) that provides all controlling over a app activity for unit testing. For more detail you may see the <a href="http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase2.html" target="_blank">declaration</a>. We need to override <b>setup </b>and <b>tear down</b> functions. For those who are new at unit testing, please see junit or nunit unit test case basic. I have an article on <a href="http://shantonusarker.blogspot.com/2013/01/how-write-nunit-test-cases.html" target="_blank">nunit</a>. <br /><br />When extending , we will use our target activity class name(assuming that we have source code) as parameter. In here, we have to be careful as wrong class name will cause error while execution. That means, we have to choose the functions to test. From this example, we are going to test adding/deleting/editing notes. So, from code we have check which class is active(actively responsible) for those functions. in here Notelist class is responsible for showing all notes and it creates or handle all types of note operating events. So, we need this class as parameter while extending "ActivityInstrumentationTestCase2". My testing class is <b>TestNoteAdministration  </b>So the code will be<br /><i>public class TestNoteAdministration extends ActivityInstrumentationTestCase2&lt;NotesList&gt;{</i><br /><i>}</i><br /><br />-And add the constructor. <br /><i>public TestNoteAdministration() {<br />&nbsp;&nbsp; super(NotesList.class);&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</i><br /><i>}</i><br />This is spatial constructor for test case. This actually calls super class's constructor with test class activity as parameter. When the test run, this activity get initiated. <br /><br />-Add a Solo Class's object. This is our main robotium functional test operator object. We have to initialize in <b>setup</b>. <br /><i>private Solo mySolo;</i><br /><br />-Now we need to override <b>Setup </b>and <b>Teardown </b>Methods. <br /><br /><i>@Override<br />&nbsp;public void setUp() throws Exception {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mySolo= new Solo(getInstrumentation(), getActivity());<br />}</i><br />In here , <i>getInstrumentation </i>used for initializing settings from manifest and <i>getActivity</i> initiates the test activity. <br /><br />&nbsp;<i>@Override<br />&nbsp;public void tearDown() throws Exception {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mySolo.finishOpenedActivities();</i><br /><i>}</i><br />This will close all the operating activity.<br /><br />Now we are ready to write a test case. Like as a Junit test method, we will write the methods. Example -<br /><i>public void AddNoteTest() throws Exception {</i><br /><i>//implement&nbsp; </i><br /><i>}</i><br /><br />A sample test case with the test project will be found in this <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQWXUwYU80VHJ3Vnc/edit?usp=sharing" target="_blank">link</a>. Like as importing note pad project, you may import and see the test code. <br /><br />Note:<br />- We will see how not to use parameter in separate post. And, I will try to provide some sample code in separate post that I have worked with different projects. <br />- Before running, you may fix android properties. To do that , right click the project &gt; android tools &gt; Fix Project Properties. <br /><br />...Thanks..:)</div><div class="blogger-post-footer">Thanks for reading my personal blog. contact: shantonu_oxford@yahoo.com</div>