---
layout: post
title: PerfMon-JMeter Server Monitoring PlugIn
date: '2013-06-26T03:45:00.001+06:00'
author: Shantonu Sarker
tags:
- jmeter
modified_time: '2013-06-30T04:25:57.799+06:00'
blogger_id: tag:blogger.com,1999:blog-2902524569242410076.post-6674185633930459286
blogger_orig_url: https://shantonusarker.blogspot.com/2013/06/perfmon-jmeter-server-monitoring-plugin.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">In this article we are going to see what are additional features/items  added after installing jmeter plugin (Google Plugin) and what we can do  with it. I will discuses about Listeners only. To know about basic of  jmeter see my this <a href="http://shantonusarker.blogspot.com/p/jmeter.html" target="_blank">page</a>. And, the process to install plug in , see this <a href="http://shantonusarker.blogspot.com/2013/01/how-to-install-plugins-in-jmeter.html" target="_blank">post</a>.<br /><br />What is PerfMon plugins? It is a server monitor plugin , where we can check the health of the server from jmeter while running. The supported list is <a href="https://support.hyperic.com/display/SIGAR/Home#Home-overview" target="_blank">here</a>. And we can test on web server that we are generating load on as well as remote servers where our remote agents are running.<br />So, by the objective of the plug in, we clearly understand there will be two component. One is, jmeter listener which will be running with jmeter. And another one will be on the server, which will send info to jmeter listener about the server.<br />From this download <a href="http://code.google.com/p/jmeter-plugins/downloads/list" target="_blank">link</a>, download server plugins(currently version 2.2.1), and install plugins to jemter.<br /><br />-After download the server agent on server, and run <b>startAgent.bat</b> in windows or <b>startAgent.sh</b> in Linux server. It will open UDP/TCP server ports where jmeter will communicate. <br /><br />-Now, we have to add <i>jp@gc - PerfMon Metrics Collector&nbsp; </i>this listener in our jmeter test plan. (controller PC, where we are running jmeter)<br /><br />-Select jp@gc - PerfMon Metrics Collector and click add a row<br />-In a row, we have to add server IP/address( where the server agent is present),Port number, the information that we want (CPU/memory) from a selectable comb and a metric parameter. So, here is a generic <a href="https://docs.google.com/file/d/0B-OmBwkwiTCQRFZYSWZlYkVEM1U/edit?usp=sharing" target="_blank">screenshot</a>. <br /><br />So, now we can run, our test and see the log file. I have used a sample dummy sampler(not real test) to get some viewable report. <br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQS1IxQzR5S3ZsRXM/edit?usp=sharing" target="_blank">Running screen shot1</a><br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQbDhtQTI1eFFCSWc/edit?usp=sharing" target="_blank">Running screen shot2</a><br /><br /><br /><a href="http://code.google.com/p/jmeter-plugins/wiki/PerfMonMetrics#Specifying_Metric_Params" target="_blank"><b>Metric parameter:</b> </a><br />Metric parameter are sub type or options under main metric controller. It is basically a string constructor that goes as parameter. It helps for making understandable metrics as well as helps to get specific info that we need. So, for Nine type of metric controllers we have nine metric parameters. Screenshots are here.<br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQb01BVDFtM2t2ZWs/edit?usp=sharing" target="_blank">1. Metric parameter-CPU</a> <br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQY25XaXptV2VyZnM/edit?usp=sharing" target="_blank">2. Metric parameter-Memory</a><br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQWWZERDV5Vmh2RXM/edit?usp=sharing" target="_blank">3. Metric parameter-Disk IO&nbsp;</a> <br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQVTZLakFDNlpSOGM/edit?usp=sharing" target="_blank">4. Metric parameter-Network IO </a><br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQaWRsRmw0UnM1eVU/edit?usp=sharing" target="_blank">5. Metric parameter-Swap</a><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQaWRsRmw0UnM1eVU/edit?usp=sharing" target="_blank">&nbsp; </a><br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQaWRsRmw0UnM1eVU/edit?usp=sharing" target="_blank">6. Metric parameter-TCP</a><br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQYndaRHpkeUVGams/edit?usp=sharing" target="_blank">7. Metric parameter-JMX&nbsp;</a> <br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQam9hNmJxTThqODg/edit?usp=sharing" target="_blank">8. Metric parameter-EXEC</a><br /><a href="https://docs.google.com/file/d/0B-OmBwkwiTCQZzEzWDZHcGxIdzg/edit?usp=sharing" target="_blank">9. Metric parameter-TAIL</a><br /><br /><b>Agent Tweaking : </b><br />1. We can enable or disable any port by shell command. Port 0 for disabled. We have to run our <b>startAgent.sh/bat </b>in following manner&nbsp; <br />Syntax : <i><b>$ ./startAgent.sh --&lt;ProtocallPort&gt; &lt;port number&gt;</b></i><br />Ex : To enable UDP at port 5000 : we need to run this in command prompt.<br /><i>$ ./startAgent.sh --udp-port 5000</i><br />Or, to disable TCP port<br /><i>$ ./startAgent.sh --tco-port 0</i><br /><br />2. We can Auto Shutdown agent after test completion<br />Syntax : <i><b>$ ./startAgent.sh --&lt;ProtocallPort&gt; &lt;port number&gt; --auto-shoutdown</b></i><br />&nbsp;EX- <i>$ ./startAgent.sh --udp-port 5000 --auto-shutdown</i><br /><br />3. We can use system Info showing for system object while running,&nbsp; <br /><i><b>$ ./startAgent.sh --sysinfo</b></i><br /><br /><b>Notes :&nbsp;</b><br />-No Need Admin privilege in the server<br />-Server agent needs JRE 1.4+ version. So, you need that installed in server.(or you can add jre package inside the folder. In that case, you have to edit bat file)<br />-We can use multiple servers. To do that , multiple server should have the agent. <br /><br /><b>Agent Extension</b> : Following this interface <i>kg.apc.perfmon.client.Transport</i> , we can use this plug in for other software using, like custom performance monitor. I will make a separate post on how can we make a class on JAVA to use this plugin for getting information. <br /><br />Thanks...:)...</div><div class="blogger-post-footer">Thanks for reading my personal blog. contact: shantonu_oxford@yahoo.com</div>