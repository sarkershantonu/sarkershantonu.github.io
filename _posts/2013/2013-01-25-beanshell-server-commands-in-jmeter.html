---
layout: post
title: BeanShell Server commands in Jmeter
date: '2013-01-25T06:45:00.000+06:00'
author: Shantonu Sarker
tags:
- jmeter
modified_time: '2013-06-30T04:27:22.015+06:00'
blogger_id: tag:blogger.com,1999:blog-2902524569242410076.post-4743130333082722774
blogger_orig_url: https://shantonusarker.blogspot.com/2013/01/beanshell-server-commands-in-jmeter.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">In this article we are going to see the Bean Shell server commands which can be enabled. To enable BeanShell server command files , see my this <a href="http://shantonusarker.blogspot.com/2013/01/configuring-jmeter-part-12-beanshell.html" target="_blank">post</a>.<br /><br />When we enable , following files are set to use for initialization. These are located in \bin directory.<br /><i>BeanShellAssertion.bshrc</i><br /><i>BeanShellFunction.bshrc</i><br /><i>BeanShellSampler.bshrc</i><br /><br />Note : In bin directory, we will see <i>BeanShellListeners.bshrc</i> also. The file contains sample definitions of Test and Thread Listeners. Not command to be installed. When ever we need to monitor listeners, we will need that.<br /><br />Note :The Following functions will be installed Commonly for <i>&nbsp;</i><br /><i>-BeanShellSampler.bshrc</i> , <i>BeanShellFunction.bshrc</i> ,<i> BeanShellAssertion.bshrc</i><br /><br />import org.apache.jmeter.util.JMeterUtils;<br />i = j = k = 0; // for counters<br />getprop(p) // get a JMeter property<br />{<br />&nbsp;&nbsp;&nbsp; return JMeterUtils.getPropDefault(p,"");<br />}<br />getprop(p,d)// get a JMeter property with default<br />{<br />&nbsp;&nbsp;&nbsp; return JMeterUtils.getPropDefault(p,d);<br />}<br />setprop(p,v)// set a JMeter property<br />{<br />&nbsp;&nbsp;&nbsp; JMeterUtils.setProperty(p, v);<br />}<br />---Common ended---<br /><br />When <i>beanshell.sampler.init=BeanShellSampler.bshrc is </i>enabled , following functions will be installed with functions from <b>common section</b>.<br /><br />stopEngine()// Stop the JMeter test<br />{<br />&nbsp;&nbsp;&nbsp; org.apache.jmeter.engine.StandardJMeterEngine.stopEngine();<br />}<br />stopThread(t)// Stop a JMeter thread<br />{<br />&nbsp;&nbsp;&nbsp; org.apache.jmeter.engine.StandardJMeterEngine.stopThread(t);<br />} <br />String getVariables() // Create a listing of the thread variables<br />{<br />&nbsp;&nbsp;&nbsp; StringBuffer myStringBuffer= new StringBuffer(100);<br />&nbsp;&nbsp;&nbsp; Iterator i = vars.getIterator();<br />&nbsp;&nbsp;&nbsp; while(i.hasNext())<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Map.Entry me = i.next();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(String.class.equals(me.getValue().getClass())){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myStringBuffer.append(me.toString()).append("\n");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; return sb.toString();<br />}<br />interrupt() // Interruptible interface<br />{<br />&nbsp;&nbsp;&nbsp; print("Interrupt detected");<br />}<br /><br />When&nbsp;<i>beanshell.function.init=BeanShellFunction.bshrc </i>is<i> </i>enabled , following functions will be installed with the functions mentioned in <b>common section</b><br /><br />stopTest()// to stop the test or the current thread<br />{<br />&nbsp;&nbsp; &nbsp;org.apache.jmeter.engine.StandardJMeterEngine.stopEngine();<br />}<br />stopThread()// Stop current JMeter thread<br />{<br />&nbsp;&nbsp; &nbsp;org.apache.jmeter.engine.StandardJMeterEngine.stopThread(Thread.currentThread().getName());<br />}<br />String fixAmps(s)// Fix ampersands in a string<br />{<br />&nbsp; return s.replaceAll("&amp;","&amp;");<br />}<br />String fixAmpsInVar(String varname)<br />{<br />&nbsp; return fixAmps(vars.get(varname));<br />}<br /><br />When&nbsp;<i>beanshell.assertion.init=BeanShellAssertion.bshrc </i>is<i> </i>enabled , Common functions will be installed only.<br /><br />Note : With the necessary of functions, we need to  choose BeanShell Sampler file to initialize. <br /><br />I will try to use BeanShell in my example section of jmeter so that it can be easy to understand. <br /><br />..Thanks...:) </div><div class="blogger-post-footer">Thanks for reading my personal blog. contact: shantonu_oxford@yahoo.com</div>